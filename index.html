<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Balanceador de Times - Torneio Semana GameDev</title>
  <link rel="icon" type="image/png" href="virusSF.png">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #04001e;
      --accent1: #00ffc7;
      --accent2: #a020ef;
      --white: #ffffff;
      --glass: rgba(255,255,255,0.03);
      --card: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box}
    body{margin:0;min-height:100vh;background:radial-gradient(1200px 600px at 10% 10%, rgba(160,32,239,0.06), transparent), radial-gradient(1000px 500px at 90% 90%, rgba(0,255,199,0.04), transparent), var(--bg);color:var(--white);font-family:Roboto, 'Share Tech Mono', monospace}
    .wrap{max-width:1000px;margin:32px auto;padding:24px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow:0 8px 30px rgba(0,0,0,0.6);border:1px solid rgba(160,32,239,0.06)}
    header{display:flex;gap:16px;align-items:center}
    .logo{width:92px;height:92px;background:linear-gradient(135deg,var(--accent2),var(--accent1));border-radius:8px;display:grid;place-items:center;position:relative;overflow:hidden}
    .logo img{width:80%;height:80%;object-fit:contain;opacity:0.95}
    .logo::after{position:absolute;bottom:6px;left:6px;font-size:9px;opacity:0.6}
    h1{font-family:'Orbitron',sans-serif;margin:0;font-size:22px;letter-spacing:1px}
    p.lead{margin:6px 0 0;color:rgba(255,255,255,0.75)}

    .grid{display:grid;grid-template-columns:1fr 380px;gap:20px;margin-top:18px}
    .card{background:var(--card);padding:16px;border-radius:10px;border:1px solid rgba(0,0,0,0.4)}

    label{display:block;font-size:13px;margin-bottom:6px;color:rgba(255,255,255,0.85)}

    /* Styled selects and options to match theme (many browsers support color/background for options) */
    select{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));color:var(--white);outline:none;appearance:none;-webkit-appearance:none;position:relative}
    select:focus{box-shadow:0 0 0 3px rgba(0,255,199,0.06)}
    option{background:var(--bg);color:var(--white)}

    input{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--white);outline:none}
    .players{margin-top:12px}
    .player-row{display:flex;gap:8px;align-items:center;margin-bottom:8px}
    .player-row input[type="text"]{flex:1}
    .player-row select{width:220px}
    .btn{display:inline-block;padding:10px 12px;border-radius:8px;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#05030a;font-weight:700;border:none;cursor:pointer;box-shadow:0 6px 18px rgba(0,0,0,0.5);font-family:'Orbitron',sans-serif}
    .btn.ghost{background:transparent;color:var(--white);border:1px dashed rgba(0,255,199,0.16)}

    .controls{display:flex;gap:8px;margin-top:10px}

    .notice{padding:12px;border-radius:8px;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);color:rgba(255,255,255,0.8)}

    .result{padding:16px;border-radius:10px;margin-top:12px;font-weight:700;position:relative;overflow:hidden}
    .result.good{background:linear-gradient(90deg, rgba(0,255,199,0.06), rgba(160,32,239,0.03));border:1px solid rgba(0,255,199,0.12);color:var(--accent1)}
    .result.warn{background:linear-gradient(90deg, rgba(255,165,0,0.03), rgba(255,255,255,0.01));border:1px solid rgba(255,165,0,0.06);color:#ffd080}
    .result.bad{background:linear-gradient(90deg, rgba(255,0,77,0.03), rgba(255,255,255,0.01));border:1px solid rgba(255,0,77,0.06);color:#ff6b9a}

    .meta{font-size:13px;opacity:0.85;margin-top:8px}

    /* glitch headline */
    .glitch{font-family:'Orbitron',sans-serif;font-size:18px;position:relative;color:var(--white)}
    .glitch::before,.glitch::after{content:attr(data-text);position:absolute;left:0;top:0;opacity:0.8}
    .glitch::before{color:var(--accent1);transform:translate(-2px, -1px);mix-blend-mode:screen}
    .glitch::after{color:var(--accent2);transform:translate(2px,1px);mix-blend-mode:screen}

    footer{margin-top:18px;font-size:13px;color:rgba(255,255,255,0.6);display:flex;justify-content:space-between;align-items:center}

    @media(max-width:900px){.grid{grid-template-columns:1fr;}.logo{width:72px;height:72px}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">
        <!-- troque a imagem abaixo pela sua logo -->
        <img src="./virus.png" alt="Logo placeholder">
      </div>
      <div>
        <h1 class="glitch" data-text="Balanceador de Times - Torneio Semana GameDev">Balanceador de Times - Torneio Semana GameDev</h1>
        <p class="lead">Escolha a modalidade, adicione os elos dos jogadores e veja se o time está apto.</p>
      </div>
    </header>

    <div class="grid">
      <div>
        <div class="card">
          <label for="mode">Modalidade</label>
          <select id="mode">
            <option value="default">Selecione</option>
            <option value="valorant">Valorant</option>
            <option value="freefire">Free Fire</option>
            <option value="wildrift">Wild Rift</option>
          </select>

          <div class="players" id="players">
            <!-- player rows injected here -->
          </div>

          <div class="controls">
            <button id="compute" class="btn" style="margin-left:auto">Calcular</button>
          </div>

          <div id="resultBox" class="result" style="display:none">
            <div id="resultText">—</div>
            <div class="meta" id="metaText"></div>
          </div>
        </div>

      </div>

      <aside class="card">
        <h3 style="margin-top:0">Como funciona</h3>
        <p style="margin-bottom:8px">O sistema atribui um peso a cada elo (por modalidade). Calcula a média por jogador do time e compara com uma faixa ideal. Mensagens:</p>
        <ul style="opacity:0.9">
          <li><strong>Na medida certa</strong> — time equilibrado</li>
          <li><strong>Forte demais</strong> — time acima do esperado (pode desequilibrar torneio)</li>
        </ul>

        <hr style="border:none;border-top:1px solid rgba(255,255,255,0.04);margin:12px 0">
        <h4 style="margin:0 0 6px">Pesos usados</h4>
        <pre style="background:transparent;border-radius:6px;padding:8px;border:1px dashed rgba(255,255,255,0.03);overflow:auto;font-size:13px;line-height:1.4">Valorant: Iron(1) → Radiant(9)
Free Fire: Bronze(1) → Grandmaster(7)
Wild Rift: Iron(1) → Challenger(10)</pre>

        <div style="margin-top:12px;display:flex;gap:8px;justify-content:center">
        </div>
      </aside>
    </div>

    <footer>
      <div style="color:rgba(255,255,255,0.5)">Cores: <span style="color:var(--accent1)">#00ffc7</span> / <span style="color:var(--accent2)">#a020ef</span></div>
    </footer>
  </div>

  <script>
    const weights = {
      freefire: {"Bronze":1,"Silver":2,"Gold":3,"Platinum":4,"Diamond":5,"Heroic":6,"Grandmaster":7},
      valorant: {"Iron":1,"Bronze":2,"Silver":3,"Gold":4,"Platinum":5,"Diamond":6,"Ascendant":7,"Immortal":8,"Radiant":9},
      wildrift: {"Iron":1,"Bronze":2,"Silver":3,"Gold":4,"Emerald":5,"Platinum":6,"Diamond":7,"Master":8,"Grandmaster":9,"Challenger":10}
    };

    // target average per player and tolerance
    const targets = { freefire:4, valorant:5, wildrift:6 };
    const tol = 1; // +/- 1

    const playersDiv = document.getElementById('players');
    const modeSel = document.getElementById('mode');
    const computeBtn = document.getElementById('compute');
    const resultBox = document.getElementById('resultBox');
    const resultText = document.getElementById('resultText');
    const metaText = document.getElementById('metaText');
    const resetBtn = document.getElementById('resetBtn');
    const copyLink = document.getElementById('copyLink');

    function createPlayerRow(i){
      const row = document.createElement('div');
      row.className = 'player-row';
      row.dataset.index = i;

      const name = document.createElement('input');
      name.type = 'text'; name.placeholder = 'Nome (opcional)';

      const select = document.createElement('select');
      select.name = 'elo';

      row.appendChild(name);
      row.appendChild(select);
      if(modeSel.value !== 'default') populateEloOptions(select, modeSel.value);
      else {
        const opt = document.createElement('option'); opt.value=''; opt.textContent='Selecione uma modalidade'; opt.disabled=true; opt.selected=true; select.appendChild(opt);
      }

      return row;
    }

    function populateEloOptions(sel, mode){
      sel.innerHTML = '';
      const map = weights[mode] || {};
      Object.keys(map).forEach(k=>{
        const opt = document.createElement('option'); opt.value = k; opt.textContent = k;
        sel.appendChild(opt);
      });
    }

    function rebuildDefault(){
      playersDiv.innerHTML='';
      if(modeSel.value === 'default'){
        playersDiv.innerHTML = '<div class="notice">Selecione uma modalidade acima para começar. Depois, adicione os jogadores (ou use os padrões).</div>';
        computeBtn.disabled = true; computeBtn.style.opacity = 0.6; return;
      }
      computeBtn.disabled = false; computeBtn.style.opacity = 1;
      // sensible defaults per modalidade
      let defaultCount = 5;
      if(modeSel.value==='valorant') defaultCount = 5;
      if(modeSel.value==='freefire') defaultCount = 4;
      if(modeSel.value==='wildrift') defaultCount = 5;
      for(let i=0;i<defaultCount;i++) playersDiv.appendChild(createPlayerRow(i));
    }

    modeSel.addEventListener('change', ()=>{
      // when mode changes, rebuild players and hide result
      rebuildDefault();
      resultBox.style.display='none';
    });

    computeBtn.addEventListener('click', ()=>{
      if(modeSel.value === 'default') return alert('Por favor selecione uma modalidade antes de calcular.');
      const selects = Array.from(document.querySelectorAll('.player-row select'));
      if(selects.length===0) return alert('Adicione ao menos 1 jogador');
      const mode = modeSel.value;
      const map = weights[mode] || {};
      let total=0; let count=0; const details=[];
      selects.forEach((s, i)=>{
        const elo = s.value; const w = map[elo] || 0; total += w; count++; details.push({elo: elo || '—',w,name: s.previousElementSibling.value||('Jogador '+(i+1))});
      });
      const avg = total/count;
      const target = targets[mode];
      const lower = target - tol; const upper = target + tol;

      // decide message
      let cls=''; let msg='';
      if(avg >= lower && avg <= upper){ cls='good'; msg='Seu time está na medida certa! Pronto para competir.' }
      else if(avg < lower){ cls='bad'; msg='Seu time está fraco demais — considere trocar por jogadores com elo maior.' }
      else { cls='warn'; msg='Seu time está forte demais — pode desequilibrar o torneio (considere balancear).' }

      resultBox.className = 'result '+cls; resultBox.style.display='block';
      // build message content
      let detailLines = details.map(d=>`${d.name}: ${d.elo} (${d.w} pts)`).join('<br>');
      resultText.innerHTML = `<div style="font-size:18px">${msg}</div><div style="opacity:0.9;margin-top:6px">Média por jogador: <strong>${avg.toFixed(2)}</strong> — Soma: <strong>${total}</strong></div>`;
      metaText.innerHTML = detailLines + `<br><br>Faixa ideal por jogador: ${lower.toFixed(1)} — ${upper.toFixed(1)} (target ${target})`;

      // subtle glitch effect
      resultBox.animate([{filter:'hue-rotate(0deg)'},{filter:'hue-rotate(15deg)'},{filter:'hue-rotate(0deg)'}],{duration:1100,iterations:1});
    });

    resetBtn.addEventListener('click', ()=>{ modeSel.value='default'; rebuildDefault(); resultBox.style.display='none';});

    copyLink.addEventListener('click', (e)=>{
      e.preventDefault();
      if(modeSel.value === 'default') return alert('Selecione uma modalidade antes de copiar a configuração.');
      // copy current config as JSON
      const mode = modeSel.value; const rows = Array.from(document.querySelectorAll('.player-row'));
      const data = {mode,players: rows.map(r=>({name:r.querySelector('input').value, elo:r.querySelector('select').value}))};
      navigator.clipboard?.writeText(JSON.stringify(data,null,2)).then(()=>{
        copyLink.textContent='Config copiada!'; setTimeout(()=>copyLink.textContent='Copiar Config',1500);
      }).catch(()=>alert('Não foi possível copiar — use Ctrl+C'));
    });

    // init
    rebuildDefault();
  </script>
</body>
</html>
